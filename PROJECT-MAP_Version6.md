# نقشه جامع پروژه، ساختار فایل‌ها و دیتابیس وایت‌لیست شرکت‌های تولیدی

این مستند مرجع کامل پروژه است و هر توسعه‌دهنده‌ای با مطالعه آن می‌تواند پروژه را نصب، تست، نگهداری یا توسعه دهد.

---

## ۱. ساختار کلی پوشه‌ها و فایل‌های پروژه

```
140407041910/
├── api/
│   └── whitelist.php         # API برای خروجی JSON از دیتابیس شرکت‌ها
├── assets/
│   ├── css/
│   │   ├── header-footer.css
│   │   ├── theme-typography.css
│   │   └── search-modern.css
│   ├── js/
│   │   └── whitelist.js      # کد جاوااسکریپت نمایش جدول و سرچ
│   └── fonts/
│       └── Vazirmatn[wght].woff2
├── pages/
│   ├── whitelist.html        # صفحه اصلی وایت‌لیست شرکت‌ها
│   ├── navbar.html           # منوی بالای صفحه
│   └── footer.html           # فوتر سایت
├── _db.php                   # کانکشن به دیتابیس
├── README.md                 # مستند پروژه (شرح امکانات، نصب و اجرا)
├── PROJECT-MAP.md            # نقشه پروژه، دیتابیس و روش اجرا (همین فایل)
└── sql/
    └── full_schema_rebuild.sql # اسکریپت ایجاد جدول و دیتابیس
```

---

## ۲. شرح نقش و وظیفه هر فایل مهم

- **api/whitelist.php**  
  API خروجی JSON شرکت‌های مجاز با مدیریت خطا و اتصال امن به دیتابیس.
- **assets/js/whitelist.js**  
  مدیریت دریافت داده، ساخت جدول HTML، جستجو و مدیریت پیام‌های خطا.
- **pages/whitelist.html**  
  رابط کاربری نمایش جدول، فرم جستجو و بارگذاری منو و فوتر.
- **assets/css/**  
  استایل‌های مدرن و واکنش‌گرا برای ظاهر زیبا و خوانا.
- **_db.php**  
  فایل اتصال به دیتابیس (تنظیمات یوزر، پسورد، نام دیتابیس).
- **navbar.html / footer.html**  
  اجزای مشترک منو و فوتر سایت.
- **sql/full_schema_rebuild.sql**  
  اسکریپت ساخت اولیه جدول و دیتابیس (برای نصب از صفر).
- **README.md / PROJECT-MAP.md**  
  مستندات اجرایی، چک‌لیست، نقشه پروژه و راهنمای توسعه.

---

## ۳. نقشه دیتابیس پروژه

### جدول اصلی: factories_whitelist

| نام ستون                     | نوع داده    | توضیح کاربرد                                                         |
|-----------------------------|------------|----------------------------------------------------------------------|
| id                          | INT        | کلید اصلی (Primary Key)                                              |
| national_code               | VARCHAR    | شناسه ملی شرکت                                                       |
| factory_name_fa             | VARCHAR    | نام فارسی سایت تولیدی                                                |
| manufacturing_industry_type | VARCHAR    | نوع صنعت تولیدی (غذایی، نساجی، خودرو ...)                            |
| production_site_type        | VARCHAR    | نوع سایت تولیدی (کارخانه، کارگاه، واحد صنعتی ...)                    |
| manager_name_fa             | VARCHAR    | نام مدیر شرکت                                                        |
| ...                         | ...        | سایر ستون‌ها (در صورت نیاز مانند آدرس، تلفن، تاریخ ثبت ...)           |

#### نمونه ساخت جدول
```sql
CREATE TABLE factories_whitelist (
  id INT PRIMARY KEY AUTO_INCREMENT,
  national_code VARCHAR(20) NOT NULL,
  factory_name_fa VARCHAR(100) NOT NULL,
  manufacturing_industry_type VARCHAR(50),
  production_site_type VARCHAR(50),
  manager_name_fa VARCHAR(50)
  -- سایر ستون‌ها در صورت نیاز
);
```

#### نمونه داده تستی
| id | national_code | factory_name_fa | manufacturing_industry_type | production_site_type | manager_name_fa |
|----|--------------|-----------------|----------------------------|---------------------|-----------------|
| 1  | 1234567890   | شرکت الف        | غذایی                      | کارخانه             | محمد احمدی      |
| 2  | 2244668800   | شرکت ب          | نساجی                      | کارگاه              | علی موسوی       |

---

## ۴. روش اجرا، نصب و تست پروژه

1. **کلون کردن پروژه**
   ```sh
   git clone https://github.com/kancco/140407041910.git
   ```
2. **ساخت دیتابیس و جدول**
   - تنظیمات را در `_db.php` وارد کنید (یوزر، پسورد، نام دیتابیس)
   - اجرای اسکریپت ساخت جدول:
     ```sh
     mysql -u root -p < sql/full_schema_rebuild.sql
     ```
3. **وارد کردن داده تستی**
   - با phpMyAdmin یا دستور SQL، داده تستی در جدول factories_whitelist وارد کنید.
4. **تست خروجی API**
   - آدرس `/api/whitelist.php` را در مرورگر باز کنید تا خروجی JSON ببینید.
5. **تست فرانت و جدول**
   - صفحه `pages/whitelist.html` را باز کنید تا جدول شرکت‌ها را ببینید و جستجو کنید.

---

## ۵. شروط مهم اجرایی و توسعه

- نام ستون‌ها باید دقیقاً با جدول دیتابیس مطابقت داشته باشد؛ هرگونه تغییر باید در کدها اعمال شود.
- کوئری‌ها باید طوری نوشته شوند که هر شرکت فقط یکبار نمایش داده شود (GROUP BY بر اساس نام شرکت).
- مدیریت خطا در API و نمایش پیام مناسب در فرانت‌اند الزامی است.
- اتصال به دیتابیس باید از طریق _db.php و با اطلاعات صحیح انجام شود.
- جدول و فرم جستجو باید واکنش‌گرا باشند تا در موبایل و دسکتاپ خوانا باشند.
- برای توسعه آتی (افزودن ستون، فیلتر، اکسپورت)، کدها ماژولار و قابل توسعه نگهداری شوند.
- هرگونه تغییر یا توسعه جدید باید در مستندات ثبت شود.

---

## ۶. چک‌لیست رفع اشکال و تست پروژه

- [ ] جدول factories_whitelist وجود دارد و داده تستی دارد.
- [ ] نام ستون‌ها دقیقاً با جدول مطابقت دارد.
- [ ] اتصال دیتابیس در _db.php درست است و به دیتابیس اصلی پروژه متصل می‌شود.
- [ ] خروجی API در مرورگر JSON معتبر است و خطا ندارد.
- [ ] کد جاوااسکریپت داده را دریافت و جدول را نمایش می‌دهد.
- [ ] فرم جستجو فعال است و داده‌ها فیلتر می‌شوند.
- [ ] پیام‌های خطا و نبود داده به زبان فارسی و خوانا نمایش داده می‌شود.
- [ ] جدول واکنش‌گرا است و در موبایل و دسکتاپ درست دیده می‌شود.

---

## ۷. توصیه‌های توسعه و نگهداری

- قبل از هر تغییر در دیتابیس یا کدها، نام ستون‌ها را دقیقاً بررسی و مستند کن.
- هرگونه تغییر در ساختار جدول یا ستون‌ها باید همزمان در کوئری API و کد JS اعمال شود.
- قبل از انتشار، پروژه را با داده تستی کاملاً بررسی و تست کن.
- برای افزودن قابلیت‌های جدید (مانند فیلتر پیشرفته، اکسپورت، ویرایش)، کدها را ماژولار و قابل توسعه نگهدار.
- مستندات و گزارش اقدامات را به‌روزرسانی کن تا توسعه‌دهندگان بعدی بتوانند به راحتی پروژه را ادامه دهند.

---

**این مستند جامع برای اجرا، توسعه، تست و نگهداری پروژه وایت‌لیست شرکت‌های تولیدی تهیه شده و هر توسعه‌دهنده‌ای با مطالعه آن قادر به پیاده‌سازی کامل، رفع اشکال و توسعه خواهد بود.**